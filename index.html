<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LapAKABogor - Marketplace Politeknik AKA Bogor</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      color: #333;
    }
    a { color: inherit; text-decoration: none; }
    button {
      cursor: pointer;
      border: none;
      font-family: inherit;
    }
    :root {
      --jingga: #f97316;
      --biru: #2563eb;
      --merah: #dc2626;
      --hijau: #16a34a;
      --gray-light: #f3f4f6;
      --gray-dark: #4b5563;
    }
/* === SPLASH SCREEN === */
#splashScreen {
  position: fixed;
  inset: 0;
  background: white;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  transition: opacity 0.5s ease;
  animation: splashFadeIn 0.8s ease;
}

#splashScreen.fade-out {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease;
}

#splashScreen .splash-content {
  text-align: center;
  animation: splashContentUp 0.8s ease;
}

#splashScreen .splash-logo {
  width: 120px;
  height: 120px;
  border-radius: 50%; /* membuat logo bulat */
  object-fit: cover;
  margin-bottom: 16px;
  border: 3px solid #f97316; /* opsional: bingkai oranye */
}

#splashScreen .splash-title {
  font-size: 2rem;
  font-weight: bold;
  font-family: 'Poppins', sans-serif;
  color: #000;
}

#splashScreen .splash-title .aka-highlight {
  color: #f97316; /* bagian 'AKA' warna oranye */
}

/* Transisi Muncul */
@keyframes splashFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Transisi Konten Naik */
@keyframes splashContentUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* === SLIDER === */
.slider {
  overflow: hidden;
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 0.75rem;
  margin-bottom: 1rem;
  position: relative;

  /* Animated border gradient */
  border: 3px solid transparent;
  background:
    linear-gradient(#fff, #fff) padding-box,
    linear-gradient(270deg, #ef4444, #2563eb, #10b981, #f97316, #ef4444) border-box;
  background-size: 800% 800%;
  animation: borderAnimation 15s ease infinite;

  /* Glow effect */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1),
              0 0 12px rgba(249, 115, 22, 0.2);
}

@keyframes borderAnimation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.slides {
  display: flex;
  width: 300%;
  height: 100%;
  animation: slide 12s infinite;
}

.slides img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  flex-shrink: 0;
}

@keyframes slide {
  0%   { transform: translateX(0%); }
  33%  { transform: translateX(-100%); }
  66%  { transform: translateX(-200%); }
  100% { transform: translateX(0%); }
}


/* === CAPTIONS === */
.slider-caption {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.75);
  color: #111;
  font-weight: bold;
  font-size: 1rem;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  animation: fadeIn 2s ease-in-out;
  z-index: 2;
}

.slider-caption.left {
  left: 1rem;
}

.slider-caption.right {
  right: 1rem;
}

@keyframes fadeIn {
  0% { opacity: 0; transform: translateY(-60%) scale(0.95); }
  100% { opacity: 1; transform: translateY(-50%) scale(1); }
}


header {
  background: var(--jingga);
  color: white;
  display: flex;
  align-items: center;
  padding: 0.5rem 1rem;
  position: sticky;
  top: 0;
  z-index: 10;
  flex-wrap: wrap;
}

/* Judul teks */
header .logo {
  font-weight: 700;
  font-size: 1.25rem;
  letter-spacing: 1px;
  flex-shrink: 0;
}

header .logo span {
  color: var(--biru);
}

/* Logo gambar */
header .logo-img {
  height: 40px;
  width: 40px;
  border-radius: 9999px;
  object-fit: cover;
  margin: 0 1rem;
  flex-shrink: 0;
}

/* Kolom pencarian */
header .search-bar {
  flex-grow: 1;
  margin: 0 1rem;
  position: relative;
}

header .search-bar input {
  width: 100%;
  padding: 0.5rem 2.5rem 0.5rem 0.75rem;
  border-radius: 9999px;
  border: none;
  font-size: 1rem;
}

header .search-bar button {
  position: absolute;
  right: 0.3rem;
  top: 50%;
  transform: translateY(-50%);
  background: var(--biru);
  color: white;
  padding: 0.4rem 0.75rem;
  border-radius: 9999px;
  font-weight: 600;
  font-size: 0.9rem;
}

/* Ikon keranjang */
header .icons {
  display: flex;
  align-items: center;
  gap: 1rem;
}

header .icon-btn {
  background: none;
  color: white;
  font-size: 1.5rem;
  position: relative;
}

header .icon-btn .cart-count {
  position: absolute;
  top: -6px;
  right: -8px;
  background: var(--merah);
  color: white;
  font-size: 0.75rem;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 9999px;
}

/* Responsif */
@media (max-width: 600px) {
  header {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  header .search-bar {
    order: 2;
    width: 100%;
    margin: 0.5rem 0;
  }

  header .logo {
    order: 1;
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
  }

  header .logo-img {
    order: 3;
    margin: 0.25rem 0;
  }

  header .icons {
    order: 4;
    justify-content: center;
    margin-top: 0.5rem;
  }
}

#catalogEl {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem; /* jarak antar kartu */
  justify-content: space-between;
}

.product-card {
  flex: 0 1 calc(33.333% - 1rem); /* 3 per baris dengan margin gap */
  max-width: calc(33.333% - 1rem);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: #f9fafb;
  padding: 1rem;
  border-radius: 1.25rem;
  box-shadow: 0 4px 8px rgba(0,0,0,0.04);
  transition: transform 0.2s ease;
  box-sizing: border-box;
}

.product-card:hover {
  transform: translateY(-2px);
}

.product-image {
  width: 100%;
  text-align: center;
  margin-bottom: 0.5rem;
}

.product-image img {
  max-width: 100%;
  height: auto;
  border-radius: 0.75rem;
}

main {
  padding: 0.5rem 0.75rem 0.75rem;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;

  background: #fff;
  border: 3px solid #ccc;
  border-radius: 1.25rem 1.25rem 2rem 2rem; /* bentuk seperti keranjang */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  position: relative;
  transition: transform 0.2s ease, box-shadow 0.3s ease;
  box-sizing: border-box;
}

main:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
}

.product-name {
  font-weight: 600;
  font-size: 0.95rem;
  text-align: center;
}

.product-price {
  color: var(--merah);
  font-weight: 700;
  margin-bottom: 0.75rem;
  font-size: 1rem;
  text-align: center;
}

.add-cart-btn {
  background: var(--hijau);
  color: white;
  border-radius: 9999px;
  padding: 0.5rem 1rem;
  font-weight: 700;
  font-size: 0.9rem;
  transition: background-color 0.2s ease;
  margin-top: auto;
  align-self: center;
}

.add-cart-btn:hover {
  background: #138c35;
}

/* Panel modal deskripsi produk di samping katalog */
.modal {
  position: fixed;
  top: 0;
  right: -100%;
  width: 400px;
  height: 100vh;
  background-color: #fff;
  z-index: 9999;
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
  transition: right 0.3s ease, opacity 0.3s ease;
  opacity: 0;
  pointer-events: none;
}

/* Saat modal dibuka */
.modal.show {
  right: 0;
  opacity: 1;
  pointer-events: auto;
}

/* Konten dalam modal */
.modal-content {
  padding: 20px 25px;
  box-sizing: border-box;
  min-height: 100%;
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
}

/* Tombol tutup di pojok kanan atas */
.close-modal {
  position: absolute;
  top: 12px;
  right: 15px;
  font-size: 24px;
  font-weight: 700;
  cursor: pointer;
  background: none;
  border: none;
  color: #333;
}


/* Responsif untuk layar kecil: modal tampil dari bawah */
@media (max-width: 600px) {
  .modal {
    width: 100vw;
    height: 80vh;
    right: 0;
    bottom: -100%;
    top: auto;
    transition: bottom 0.3s ease, opacity 0.3s ease;
  }

  .modal.show {
    bottom: 0;
    opacity: 1;
  }
}


/* Style khusus untuk cart modal */
#cartModal {
  position: fixed;
  top: 0;
  right: -100%;
  width: 320px;
  max-width: 100vw;
  height: 100vh;
  background: white;
  box-shadow: -3px 0 10px rgba(0,0,0,0.2);
  transition: right 0.3s ease;
  z-index: 9999;
  display: flex;
  flex-direction: column;
}

#cartModal.open {
  right: 0;
}

#cartModal header {
  background: var(--biru);
  color: white;
  padding: 1rem;
  font-weight: 700;
  font-size: 1.25rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#cartModal header button.close-cart {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: white;
  cursor: pointer;
}


#cartContent {
  flex-grow: 1;
  overflow-y: auto;
  padding: 1rem;
  padding-right: 8px; /* agar scrollbar tidak menimpa konten */
}

    .cart-item {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
      align-items: center;
    }
    .cart-item-image {
      width: 60px;
      height: 60px;
      background-position: center;
      background-size: cover;
      border-radius: 0.25rem;
      flex-shrink: 0;
    }
    .cart-item-info {
      flex-grow: 1;
      font-size: 0.9rem;
    }
    .cart-item-name {
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    .cart-item-qty button {
      background: var(--biru);
      color: white;
      width: 22px;
      height: 22px;
      font-weight: 700;
      border-radius: 4px;
      line-height: 1;
      padding: 0;
    }
    .cart-item-qty span {
      min-width: 20px;
      text-align: center;
      display: inline-block;
    }
    .cart-item-price {
      font-weight: 700;
      color: var(--merah);
      min-width: 60px;
      text-align: right;
    }
    
#cartFooter {
  padding: 1rem;
  border-top: 1px solid var(--gray-light);
  background-color: white;
  position: sticky;
  bottom: 0;
  z-index: 10;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
}

#cartFooter .total {
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 0.75rem;
  color: var(--merah);
}

#cartFooter .checkout-btn {
  width: 100%;
  background: var(--jingga);
  color: white;
  font-weight: 700;
  padding: 0.75rem;
  border-radius: 9999px;
  font-size: 1rem;
  transition: background-color 0.2s ease;
  border: none;
  cursor: pointer;
  margin-top: 1rem;
}

#cartFooter .checkout-btn:hover {
  background: #db6e17;
}

/* Metode Pengantaran */
.delivery-method {
  font-size: 14px;
  color: #333;
  margin: 10px 0;
}

.delivery-method label {
  display: block;
  margin-bottom: 6px;
  cursor: pointer;
}

/* Input Alamat */
#alamatInput {
  margin-top: 10px;
}

#alamatInput label {
  font-size: 13px;
  display: block;
  margin-bottom: 4px;
  color: #555;
}

#alamatPengantaran {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  background-color: #f9f9f9;
}

#alamatPengantaran:focus {
  outline: none;
  border-color: #007BFF;
  background-color: #fff;
}

/* Metode Pembayaran */
.payment-method {
  font-size: 14px;
  color: #333;
  margin-top: 10px;
}

.payment-method label {
  display: block;
  margin-bottom: 6px;
  cursor: pointer;
}

/* Responsif Mobile */
@media (max-width: 600px) {
  header {
    padding: 0.5rem 0.75rem;
  }
  main {
    padding: 0.75rem;
  }
  #cartModal {
    width: 100vw;
    max-width: none;
  }
  .product-card {
    font-size: 14px;
  }
  .product-info {
    padding: 0.5rem 0.5rem 0.75rem;
  }
}
  </style>
</head>
<body>
<div id="splashScreen">
  <div class="splash-content">
    <img src="lapakabogor-splash.jpg" alt="Logo LapAKABogor" class="splash-logo" />
    <h2 class="splash-title">
      Selamat Datang di <span>Lap</span><span class="aka-highlight">AKA</span>Bogor
    </h2>
  </div>
</div>

  
<header>
  <div class="logo">Lap<span>AKA</span>Bogor</div>
  
  <!-- Tambahkan logo gambar di sini -->
  <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/70fe764ad7c8a3f220d41572d96e9fba7e910ec2/WhatsApp%20Image%202025-05-01%20at%2018.04.48_78f2ec38.jpg" 
       alt="Logo LapAKABogor" 
       class="logo-img" />

  <form class="search-bar" onsubmit="event.preventDefault(); performSearch();">
    <input type="search" id="searchInput" placeholder="Cari produk, UKM, atau kategori..." aria-label="Cari produk" />
    <button type="submit">Cari</button>
  </form>

  <div class="icons">
    <button class="icon-btn" id="cartBtn" aria-label="Keranjang Belanja (0)">
      ðŸ›’<span class="cart-count" id="cartCount" style="display:none;">0</span>
    </button>
  </div>
</header>


  <main>
  <!-- Slider -->
<div class="slider">
  <div class="slides">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/9027de4f6153d7192f1efe62f0133479faaab001/nowbi%20iklan.png " alt="Iklan 1">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d7eb09944ff7a2b5706f3d5272b1d9542a1d6b6f/iklan%202.jpg" alt="Iklan 2">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d7eb09944ff7a2b5706f3d5272b1d9542a1d6b6f/iklan%203.jpg" alt="Iklan 3">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d154fe91b6ba94e78a69525c55372586323832c4/IKLAN%20SATU.jpg" alt="Iklan 4">
  </div>
</div>
    
  <!-- Modal Deskripsi Produk -->
<div id="productModal" class="modal" style="display: none;">
  <div class="modal-content">
    <button class="close-modal" onclick="closeModal()">&times;</button>
    
    <img id="modalImg" src="" alt="Gambar Produk" 
         style="width: 100%; border-radius: 10px; margin-bottom: 1rem; object-fit: cover; max-height: 220px;">
    
    <h2 id="modalTitle" style="font-size: 1.25rem; margin-bottom: 0.5rem;"></h2>
    
    <p id="modalDesc" style="color: #444; text-align: justify; margin: 0; line-height: 1.6;"></p>
  </div>
</div>

    <section class="catalog" id="catalog"></section>
  </main>

  <aside id="cartModal" aria-label="Keranjang Belanja">
      <header>
      Keranjang Anda
      <button class="close-cart" id="closeCartBtn" aria-label="Tutup Keranjang">&times;</button>
    </header>
    <div id="cartContent">
      <p style="text-align:center;color:#666;">Keranjang kosong.</p>
    </div>
    <footer id="cartFooter" style="display:none;">
  <!-- Ringkasan Total -->
  <div class="total">Total: Rp <span id="cartTotal">0</span></div>

  <!-- 1. Identitas Konsumen -->
  <div class="customer-info" style="margin: 10px 0;">
    <label for="namaKonsumen"><strong>Nama Anda:</strong></label><br>
    <input type="text" id="namaKonsumen" placeholder="Contoh: Faishal Rahman" style="width: 100%; padding: 6px;"><br><br>

    <label for="noWhatsapp"><strong>Nomor WhatsApp:</strong></label><br>
    <input type="tel" id="noWhatsapp" placeholder="Contoh: 0896xxxxxxx" style="width: 100%; padding: 6px;"><br><br>

    <label for="catatan"><strong>Catatan Tambahan (Opsional):</strong></label><br>
    <textarea id="catatan" placeholder="Contoh: Tolong dibungkus rapi ya" style="width: 100%; padding: 6px;" rows="3"></textarea>
  </div>

  <!-- 2. Metode Pengantaran -->
  <div class="delivery-method" style="margin: 10px 0;">
    <label>
      <input type="radio" name="pengantaran" value="Ambil Langsung (Politeknik AKA Bogor)" checked onchange="toggleAlamat()">
      Ambil Langsung (Politeknik AKA Bogor)
    </label><br>
    <label>
      <input type="radio" name="pengantaran" value="Diantar" onchange="toggleAlamat()">
      Diantar
    </label>
  </div>

  <!-- 3. Input Alamat jika Diantar -->
  <div id="alamatInput" style="display:none;">
    <label for="alamatPengantaran">Alamat Pengantaran:</label>
    <input type="text" id="alamatPengantaran" placeholder="Masukkan alamat lengkap..." style="width: 100%; padding: 6px;">
  </div>

  <!-- 4. Metode Pembayaran -->
  <div class="payment-method" style="margin: 10px 0;">
    <label><input type="radio" name="pembayaran" value="QRIS" checked> QRIS</label><br>
    <label><input type="radio" name="pembayaran" value="Cash"> Cash</label>
  </div>

  <!-- 5. Tombol Checkout -->
  <button class="checkout-btn" onclick="checkout()">Checkout via WhatsApp</button>
</footer>

  </aside>
   <script>
// Splash screen
window.addEventListener('DOMContentLoaded', () => {
  const splash = document.getElementById('splashScreen');
  
  // Tunda 3 detik sebelum mulai menghilang
  setTimeout(() => {
    splash.classList.add('fade-out');

    // Hapus elemen dari DOM setelah transisi selesai (0.5 detik sesuai CSS)
    setTimeout(() => {
      if (splash && splash.parentNode) {
        splash.parentNode.removeChild(splash);
      }
    }, 500);
    
  }, 3000); // Durasi splash muncul (3 detik)
});

     
const products = [
  {
    id: 'p1',
    name: 'Stick Ubi Ungu NanoKelor',
    price: 10000, // Harga default 75 gram
    img: 'https://github.com/Lapakabogor/LapAKABogor/blob/b829aa7ec3b23db0f6145105a9dcd4439e75f1d0/NOWWBI.jpg?raw=true',
    description: 'Stick ubi ungu dengan nanoflavour daun kelor yang menyehatkan sekaligus membuat harimu menyenangkan. ' +
                 'Pilihan rasa: Karameloor (karamel + kelor), Green Zeen (green tea + kelor), Chocokick (dark choco + kelor), ' +
                 'Seayo Green (seaweed + kelor), dan Bali Breeze (sambal matah + kelor). ' +
                 'Tersedia dua ukuran: 75 gram (Rp10.000) dan 40 gram (Rp7.000).'
  },
  {
    id: 'p2',
    name: 'Pakaian Batik Modern',
    price: 120000,
    img: 'https://images.pexels.com/photos/3764477/pexels-photo-3764477.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Batik bergaya modern yang elegan, cocok digunakan untuk acara formal maupun santai. ' +
                 'Tersedia dalam berbagai ukuran dan motif eksklusif.'
  },
  {
    id: 'p3',
    name: 'Aksesori Kulit Mahasiswa',
    price: 75000,
    img: 'https://images.pexels.com/photos/168009/pexels-photo-168009.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Aksesori berbahan kulit sintetis yang praktis dan stylish untuk mahasiswa aktif dan dinamis.'
  },
  {
    id: 'p4',
    name: 'Makanan Ringan Khas Bogor',
    price: 30000,
    img: 'https://images.pexels.com/photos/2553658/pexels-photo-2553658.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Camilan tradisional khas Bogor dengan cita rasa otentik, cocok untuk teman minum teh atau oleh-oleh.'
  },
  {
    id: 'p5',
    name: 'Tas Ransel Kulit Sintetis',
    price: 200000,
    img: 'https://images.pexels.com/photos/267202/pexels-photo-267202.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Tas ransel dengan desain modern dan material kulit sintetis yang tahan lama, cocok untuk kerja atau kuliah.'
  },
  {
    id: 'p6',
    name: 'Jaket Hoodie Unik',
    price: 135000,
    img: 'https://images.pexels.com/photos/2540696/pexels-photo-2540696.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Jaket hoodie dengan desain unik dan bahan nyaman, ideal untuk gaya santai sehari-hari.'
  }
];


  const catalogEl = document.getElementById('catalog');
  const cartBtn = document.getElementById('cartBtn');
  const cartModal = document.getElementById('cartModal');
  const closeCartBtn = document.getElementById('closeCartBtn');
  const cartCountEl = document.getElementById('cartCount');
  const cartContent = document.getElementById('cartContent');
  const cartFooter = document.getElementById('cartFooter');
  const cartTotalEl = document.getElementById('cartTotal');
  let cart = {};

  function formatPrice(num) {
    return num.toLocaleString('id-ID');
  }

function renderCatalog(productsToRender) {
  catalogEl.innerHTML = '';
  if (productsToRender.length === 0) {
    catalogEl.innerHTML = '<p style="font-style:italic;color:#666;text-align:center;">Tidak ada produk ditemukan.</p>';
    return;
  }

  productsToRender.forEach(product => {
    const card = document.createElement('article');
    card.className = 'product-card';
    card.onclick = () => openModal(product.id);

    card.innerHTML = `
      <div class="product-image" style="
        background-image: url('${product.img}');
        background-size: cover;
        background-position: center;
        height: 180px;
        border-radius: 1.25rem 1.25rem 0 0;
      "></div>
      <main>
        <div class="product-name">${product.name}</div>
        <div class="product-price">Rp ${formatPrice(product.price)}</div>
        <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart('${product.id}')">
          Tambah ke Keranjang
        </button>
      </main>
    `;

    catalogEl.appendChild(card);
  });
}

<article class="product-card" data-id="${product.id}" onclick="openModal('${product.id}')">

  function addToCart(productId) {
    if (cart[productId]) {
      cart[productId].qty++;
    } else {
      const product = products.find(p => p.id === productId);
      cart[productId] = {
        ...product,
        qty: 1
      };
    }
    updateCartUI();
    openCart();
  }

  function removeFromCart(productId) {
    delete cart[productId];
    updateCartUI();
  }

  function changeQty(productId, delta) {
    if (!cart[productId]) return;
    cart[productId].qty += delta;
    if (cart[productId].qty <= 0) {
      removeFromCart(productId);
    } else {
      updateCartUI();
    }
  }

  function updateCartUI() {
    const totalItems = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
    if (totalItems > 0) {
      cartCountEl.style.display = 'inline-block';
      cartCountEl.textContent = totalItems;
    } else {
      cartCountEl.style.display = 'none';
    }

    if (totalItems === 0) {
      cartContent.innerHTML = '<p style="text-align:center;color:#666;">Keranjang kosong.</p>';
      cartFooter.style.display = 'none';
    } else {
      cartFooter.style.display = 'block';
      renderCartItems();
    }
  }

  function renderCartItems() {
    cartContent.innerHTML = '';
    let totalPrice = 0;
    for (const key in cart) {
      const item = cart[key];
      totalPrice += item.price * item.qty;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <div class="cart-item-image" style="background-image:url('${item.img}');" aria-label="Gambar produk ${item.name}"></div>
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-qty" aria-label="Jumlah produk">
            <button aria-label="Kurangi jumlah" onclick="changeQty('${item.id}', -1)">-</button>
            <span>${item.qty}</span>
            <button aria-label="Tambah jumlah" onclick="changeQty('${item.id}', 1)">+</button>
          </div>
        </div>
        <div class="cart-item-price">Rp ${formatPrice(item.price * item.qty)}</div>
      `;
      cartContent.appendChild(div);
    }
    cartTotalEl.textContent = formatPrice(totalPrice);
  }

  function openCart() {
    cartModal.classList.add('open');
  }

  function closeCart() {
    cartModal.classList.remove('open');
  }

  cartBtn.addEventListener('click', () => {
    if (cartModal.classList.contains('open')) {
      closeCart();
    } else {
      openCart();
    }
  });
  closeCartBtn.addEventListener('click', closeCart);

  function performSearch() {
    const query = document.getElementById('searchInput').value.trim().toLowerCase();
    if (query === '') {
      renderCatalog(products);
    } else {
      const filtered = products.filter(p => p.name.toLowerCase().includes(query));
      renderCatalog(filtered);
    }
  }
function checkout() {
  // Hitung total belanja
  const total = Object.values(cart).reduce((sum, item) => sum + item.price * item.qty, 0);

  // Ambil identitas konsumen
  const nama = document.getElementById("namaKonsumen").value.trim();
  const whatsapp = document.getElementById("noWhatsapp").value.trim();
  const catatan = document.getElementById("catatan").value.trim();

  if (!nama || !whatsapp) {
    alert("Silakan isi nama dan nomor WhatsApp terlebih dahulu.");
    return;
  }

  // Mulai menyusun isi pesan
  let summary = "*Pesanan LapAKABogor Anda:*\n";
  for (const [id, item] of Object.entries(cart)) {
    summary += `- ${item.name} (${item.qty} x Rp ${item.price.toLocaleString()})\n`;
  }
  summary += `\n*Total:* Rp ${total.toLocaleString()}`;

  // Metode pengantaran
  const metodePengantaran = document.querySelector('input[name="pengantaran"]:checked').value;
  summary += `\n*Pengantaran:* ${metodePengantaran}`;

  // Jika memilih "Diantar", minta alamat
  if (metodePengantaran === "Diantar") {
    const alamat = document.getElementById("alamatPengantaran").value.trim();
    if (!alamat) {
      alert("Silakan masukkan alamat pengantaran.");
      return;
    }
    summary += `\n*Alamat:* ${alamat}`;
  }

  // Metode pembayaran
  const metodePembayaran = document.querySelector('input[name="pembayaran"]:checked');
  if (metodePembayaran) {
    summary += `\n*Pembayaran:* ${metodePembayaran.value}`;
  }

  // Tambahkan identitas konsumen
  summary += `\n\n*Nama:* ${nama}\n*No. WhatsApp:* ${whatsapp}`;
  if (catatan !== "") {
    summary += `\n*Catatan:* ${catatan}`;
  }

  // Arahkan ke WhatsApp
  summary += '\n\nPesanan sudah lengkap, mohon segera diproses ya. ðŸ™Œ';
  const waMessage = encodeURIComponent(summary);
  const waLink = `https://wa.me/6282125466588?text=${waMessage}`;
  window.open(waLink, '_blank');
}

// Fungsi untuk menampilkan input alamat jika pilih "Diantar"
function toggleAlamat() {
  const selected = document.querySelector('input[name="pengantaran"]:checked').value;
  const alamatInput = document.getElementById('alamatInput');
  alamatInput.style.display = (selected === "Diantar") ? 'block' : 'none';
}

  // Inisialisasi awal
  renderCatalog(products);
  updateCartUI();
</script>
</body>
</html>
