<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LapAKABogor - Marketplace Politeknik AKA Bogor</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      color: #333;
    }
    a { color: inherit; text-decoration: none; }
    button {
      cursor: pointer;
      border: none;
      font-family: inherit;
    }
     :root {
      --jingga: #f97316;
      --biru: #2563eb;
      --merah: #dc2626;
      --hijau: #16a34a;
      --gray-light: #f3f4f6;
      --gray-dark: #4b5563;
    }
  /* === SPLASH SCREEN === */
    #splashScreen {
      position: fixed;
      inset: 0;
      background: white;
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease;
    }
    #splashScreen .splash-content {
      text-align: center;
      color: var(--biru);
    }
    #splashScreen.fade-out {
      opacity: 0;
      pointer-events: none;
    }
    /* === SLIDER === */
    .slider {
      overflow: hidden;
      width: 100%;
      border-radius: 0.75rem;
      margin-bottom: 1rem;
    }
    .slides {
      display: flex;
      width: 300%;
      animation: slide 12s infinite;
    }
    .slides img {
      width: 100%;
      object-fit: cover;
    }
    @keyframes slide {
      0%   { transform: translateX(0%); }
      33%  { transform: translateX(-100%); }
      66%  { transform: translateX(-200%); }
      100% { transform: translateX(0%); }
    }

    header {
      background: var(--jingga);
      color: white;
      display: flex;
      align-items: center;
      padding: 0.5rem 1rem;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header .logo {
      font-weight: 700;
      font-size: 1.25rem;
      letter-spacing: 1px;
      flex-shrink: 0;
    }
    header .logo span { color: var(--biru); }
    header .search-bar {
      flex-grow: 1;
      margin: 0 1rem;
      position: relative;
    }
    header .search-bar input {
      width: 100%;
      padding: 0.5rem 2.5rem 0.5rem 0.75rem;
      border-radius: 9999px;
      border: none;
      font-size: 1rem;
    }
    header .search-bar button {
      position: absolute;
      right: 0.3rem;
      top: 50%;
      transform: translateY(-50%);
      background: var(--biru);
      color: white;
      padding: 0.4rem 0.75rem;
      border-radius: 9999px;
      font-weight: 600;
      font-size: 0.9rem;
    }
    header .icons {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    header .icon-btn {
      background: none;
      color: white;
      font-size: 1.5rem;
      position: relative;
    }
    header .icon-btn .cart-count {
      position: absolute;
      top: -6px;
      right: -8px;
      background: var(--merah);
      color: white;
      font-size: 0.75rem;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 9999px;
    }
    main {
      padding: 1rem;
      max-width: 1200px;
      margin: auto;
    }
    
.kategori-produk {
  padding: 1rem;
  background-color: var(--gray-light);
  border-radius: 0.75rem;
  margin: 1rem;
}
.kategori-produk h2 {
  margin-bottom: 0.5rem;
  color: var(--biru);
}
.kategori-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}
.kategori-item {
  flex: 1 1 45%;
  background: white;
  padding: 0.75rem 1rem;
  border: 2px solid var(--gray-dark);
  border-radius: 0.5rem;
  text-align: center;
  font-weight: bold;
  color: var(--gray-dark);
  transition: 0.3s ease;
}
.kategori-item:hover {
  background: var(--biru);
  color: white;
  border-color: var(--biru);
}

    .catalog {
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(150px,1fr));
      gap: 1rem;
    }
    .product-card {
      border: 1px solid var(--gray-light);
      border-radius: 0.5rem;
      display: flex;
      flex-direction: column;
      background: white;
      box-shadow: 0 1px 4px rgb(0 0 0 / 0.1);
      transition: box-shadow 0.2s ease;
    }
    .product-card:hover {
      box-shadow: 0 4px 8px rgb(0 0 0 / 0.15);
    }
    .product-image {
      width: 100%;
      padding-top: 100%;
      background-position: center;
      background-size: cover;
      border-top-left-radius: 0.5rem;
      border-top-right-radius: 0.5rem;
    }
    .product-info {
      padding: 0.5rem 0.75rem 0.75rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .product-name {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--gray-dark);
      margin: 0 0 0.25rem;
      height: 2.5em;
      overflow: hidden;
    }
    .product-price {
      color: var(--merah);
      font-weight: 700;
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }
    .add-cart-btn {
      background: var(--hijau);
      color: white;
      border-radius: 9999px;
      padding: 0.4rem 0;
      font-weight: 700;
      font-size: 0.9rem;
      transition: background-color 0.2s ease;
    }
    .add-cart-btn:hover {
      background: #138c35;
    }
.modal {
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-content {
  background-color: #fff;
  padding: 20px;
  border-radius: 10px;
  max-width: 90%;
  width: 400px;
  position: relative;
}

.close-modal {
  position: absolute;
  top: 8px;
  right: 12px;
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
}

 #cartModal {
  position: fixed;
  top: 0;
  right: -100%;
  width: 320px;
  max-width: 100vw;
  height: 100vh;
  background: white;
  box-shadow: -3px 0 10px rgba(0,0,0,0.2);
  transition: right 0.3s ease;
  z-index: 9999;
  display: flex;
  flex-direction: column;
}

#cartModal.open {
  right: 0;
}

#cartModal header {
  background: var(--biru);
  color: white;
  padding: 1rem;
  font-weight: 700;
  font-size: 1.25rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#cartModal header button.close-cart {
  background: none;
  color: white;
  font-size: 1.5rem;
  border: none;
  cursor: pointer;
}

#cartContent {
  flex-grow: 1;
  overflow-y: auto;
  padding: 1rem;
  padding-right: 8px; /* agar scrollbar tidak menimpa konten */
}

    .cart-item {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
      align-items: center;
    }
    .cart-item-image {
      width: 60px;
      height: 60px;
      background-position: center;
      background-size: cover;
      border-radius: 0.25rem;
      flex-shrink: 0;
    }
    .cart-item-info {
      flex-grow: 1;
      font-size: 0.9rem;
    }
    .cart-item-name {
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    .cart-item-qty button {
      background: var(--biru);
      color: white;
      width: 22px;
      height: 22px;
      font-weight: 700;
      border-radius: 4px;
      line-height: 1;
      padding: 0;
    }
    .cart-item-qty span {
      min-width: 20px;
      text-align: center;
      display: inline-block;
    }
    .cart-item-price {
      font-weight: 700;
      color: var(--merah);
      min-width: 60px;
      text-align: right;
    }

    #cartFooter {
      padding: 1rem;
      border-top: 1px solid var(--gray-light);
    }
    #cartFooter .total {
      font-weight: 700;
      font-size: 1.15rem;
      margin-bottom: 0.75rem;
      color: var(--merah);
    }
    #cartFooter button.checkout-btn {
      width: 100%;
      background: var(--jingga);
      color: white;
      font-weight: 700;
      padding: 0.75rem;
      border-radius: 9999px;
      font-size: 1rem;
      transition: background-color 0.2s ease;
    }
    #cartFooter button.checkout-btn:hover {
      background: #db6e17;
    }

    @media (max-width: 600px) {
      header { padding: 0.5rem 0.75rem; }
      main { padding: 0.75rem; }
      #cartModal { width: 100vw; max-width: none; }
      .product-card { font-size: 14px; }
      .product-info { padding: 0.5rem 0.5rem 0.75rem; }
    }
    
    .delivery-method {
    font-size: 14px;
    color: #333;
  }

  .delivery-method label {
    display: block;
    margin-bottom: 6px;
    cursor: pointer;
  }

  #alamatInput {
    margin-top: 10px;
  }

  #alamatInput label {
    font-size: 13px;
    display: block;
    margin-bottom: 4px;
    color: #555;
  }

  #alamatPengantaran {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
    width: 100%;
    box-sizing: border-box;
    background-color: #f9f9f9;
  }

  #alamatPengantaran:focus {
    outline: none;
    border-color: #007BFF;
    background-color: #fff;
  }
    .payment-method {
    font-size: 14px;
    color: #333;
  }

  .payment-method label {
    display: block;
    margin-bottom: 6px;
    cursor: pointer;
  }
  </style>
</head>
<body>
<div id="splashScreen">
  <div class="splash-content">
    <img src="lapakabogor-splash.jpg" alt="Logo LapAKABogor" style="width: 140px; margin-bottom: 1rem;" />
    <h2>Selamat Datang di <span style="color:#f97316;">Lap</span><span style="color:#2563eb;">AKA</span>Bogor</h2>
  </div>
</div>
  
  <header>
    <div class="logo">Lap<span>AKA</span>Bogor</div>
    <form class="search-bar" onsubmit="event.preventDefault(); performSearch();">
      <input type="search" id="searchInput" placeholder="Cari produk, UKM, atau kategori..." aria-label="Cari produk" />
      <button type="submit">Cari</button>
    </form>
    <div class="icons">
      <button class="icon-btn" id="cartBtn" aria-label="Keranjang Belanja (0)">
        üõí<span class="cart-count" id="cartCount" style="display:none;">0</span>
      </button>
    </div>
  </header>

  <main>
  <!-- Slider -->
<div class="slider">
  <div class="slides">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d7eb09944ff7a2b5706f3d5272b1d9542a1d6b6f/iklan%201.jpg" alt="Iklan 1">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d7eb09944ff7a2b5706f3d5272b1d9542a1d6b6f/iklan%202.jpg" alt="Iklan 2">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d7eb09944ff7a2b5706f3d5272b1d9542a1d6b6f/iklan%203.jpg" alt="Iklan 3">
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d154fe91b6ba94e78a69525c55372586323832c4/IKLAN%20SATU.jpg" alt="Iklan 4">
  </div>
</div>
  </main>
 
  <main>
  <!-- Kategori Produk -->
  <section class="kategori-produk">
    <h2>Kategori Produk</h2>
    <div class="kategori-container">
      <div class="kategori-item" data-kategori="makanan-berat">üçõ Makanan Berat</div>
      <div class="kategori-item" data-kategori="makanan-ringan">üç™ Makanan Ringan</div>
      <div class="kategori-item" data-kategori="minuman">ü•§ Minuman</div>
      <div class="kategori-item" data-kategori="perawatan-kosmetik">üß¥ Perawatan & Kosmetik</div>
      <div class="kategori-item" data-kategori="rumah-tangga">üè† Rumah Tangga</div>
      <div class="kategori-item" data-kategori="fashion-bekas">üëï Fashion & Bekas</div>
    </div>
  </section>
    
<!-- Modal Produk (initially hidden) -->
  <div id="productModal" class="modal" hidden>
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()" aria-label="Tutup Modal">&times;</button>
      <img id="modalImg" src="placeholder.jpg" alt="Gambar Produk" style="width: 100%; border-radius: 6px; margin-bottom: 10px; display: none;">
      <h2 id="modalTitle">Judul Produk</h2>
      <p id="modalDesc" style="color: #555;"></p>
    </div>
  </div>

 <section class="catalog" id="catalog">
  <h2>Daftar Produk</h2>
  <!-- katalog produk -->
</section>
  </main>

 <aside id="cartModal" aria-label="Keranjang Belanja">
  <header>
    Keranjang Anda
    <button type="button" class="close-cart" id="closeCartBtn" aria-label="Tutup Keranjang">&times;</button>
  </header>
  <div id="cartContent" aria-live="polite" aria-atomic="true">
    <p style="text-align:center;color:#666;">Keranjang kosong.</p>
  </div>
  <footer id="cartFooter" style="display:none;">
    <div class="total">Total: Rp <span id="cartTotal">0</span></div>

    <fieldset class="delivery-method" style="margin: 10px 0;">
      <legend>Metode Pengantaran</legend>
      <label>
        <input type="radio" name="pengantaran" value="Ambil Langsung (Politeknik AKA Bogor)" checked onchange="toggleAlamat()">
        Ambil Langsung (Politeknik AKA Bogor)
      </label><br>
      <label>
        <input type="radio" name="pengantaran" value="Diantar" onchange="toggleAlamat()">
        Diantar
      </label>
    </fieldset>

    <div id="alamatInput" style="display:none; margin-top: 8px;">
      <label for="alamatPengantaran">Masukkan lokasi pengantaran:</label><br>
      <input type="text" id="alamatPengantaran" placeholder="Contoh: Gedung A, Lantai 2" style="width: 100%; padding: 6px;">
    </div>

    <div class="customer-info" style="margin: 10px 0;">
      <label for="namaKonsumen"><strong>Nama Anda:</strong></label><br>
      <input type="text" id="namaKonsumen" placeholder="Contoh: Faishal Rahman" style="width: 100%; padding: 6px;"><br><br>

      <label for="noWhatsapp"><strong>Nomor WhatsApp:</strong></label><br>
      <input type="tel" id="noWhatsapp" placeholder="Contoh: 0896xxxxxxx" style="width: 100%; padding: 6px;"><br><br>

      <label for="catatan"><strong>Catatan Tambahan (Opsional):</strong></label><br>
      <textarea id="catatan" placeholder="Contoh: Tolong dibungkus rapi ya" style="width: 100%; padding: 6px;" rows="3"></textarea>
    </div>

    <fieldset class="payment-method" style="margin: 10px 0;">
      <legend>Metode Pembayaran</legend>
      <label><input type="radio" name="pembayaran" value="Cash" checked> Cash</label><br>
      <label><input type="radio" name="pembayaran" value="Transfer"> Transfer</label><br>
      <label><input type="radio" name="pembayaran" value="QRIS"> QRIS</label>
    </fieldset>

    <button type="button" class="checkout-btn" onclick="checkout()">Checkout</button>
  </footer>
</aside>
  
   <script>
// Splash screen
    window.addEventListener('DOMContentLoaded', () => {
      const splash = document.getElementById('splashScreen');
      setTimeout(() => {
        splash.classList.add('fade-out');
        setTimeout(() => splash.remove(), 500);
      }, 3000);
    });
     
const products = [
  {
    id: 'p1',
    name: 'Stick Ubi Ungu NanoKelor',
    price: 10000, // Harga default 75 gram
    img: 'https://github.com/Lapakabogor/LapAKABogor/blob/b829aa7ec3b23db0f6145105a9dcd4439e75f1d0/NOWWBI.jpg?raw=true',
    description: 'Stick ubi ungu dengan nanoflavour daun kelor yang menyehatkan sekaligus membuat harimu menyenangkan. ' +
                 'Pilihan rasa: ' + 
                 '1. Karameloor (karamel + kelor), ' +
                 '2. Green Zeen (green tea + kelor), ' +
                 '3. Chocokick (dark choco + kelor), ' +
                 '4. Seayo Green (seaweed + kelor), ' +
                 '5. Bali Breeze (sambal matah + kelor). ' +
                 'Tersedia dua ukuran: ' +
                 '75 gram (Rp10.000) ' +
                 '40 gram (Rp7.000).'
    category: 'makanan-ringan'
  },
  {
  id: 'p2',
  name: 'Spaghetti Brulee',
  price: 15000,
  img: 'https://github.com/Lapakabogor/LapAKABogor/blob/15b6d484a0b4913b798152858abaf3db5266b6fd/spageti.jpg?raw=true',
  description: `SPAGHETTI BRULEE ‚Äì Creamy, Cheesy, Meaty!

Spaghetti dengan saus bolognese gurih, disiram saus keju creamy, dan dipanggang hingga saus di atasnya brulee keemasan yang menggoda.

üî• Tekstur lembut, rasa mewah ala resto  
üßÄ Keju lumer, topping daging melimpah  
‚ùÑ Bisa frozen, tinggal panaskan & nikmati!

Cocok untuk bekal makan siang, teman nugas, atau reward untuk teman!

Harga: Rp15.000`
    category: 'makanan-berat'
},
  {
  id: 'p3',
  name: 'Mochi Gendut',
  price: 8000, // Harga per buah
  img: 'https://github.com/Lapakabogor/LapAKABogor/blob/03ad4983570688d7442353ccee499c4b541123e2/mochi.jpg?raw=true',
  description: `MOCHI GENDUT ‚Äì Lembut, Lumer, dan Bikin Nagih! üç°
Mochi lembut berisi krim lumer dan buah segar.

‚ú® Varian Rasa:
üçì Strawberry Cheesecake ‚Äì manis-asam segar
ü•≠ Mango Cheesecake ‚Äì tropis creamy
üç´ Milky Choco ‚Äì coklat susu lumer
üç™ Cookies n Cream ‚Äì crunchy & creamy

‚ùÑ Nikmat disajikan dingin.
üéÅ Cocok untuk hadiah, camilan, atau self-reward!

Harga: Rp8.000/buah`
    category: 'makanan-ringan'
},
  {
    id: 'p4',
    name: 'Makanan Ringan Khas Bogor',
    price: 30000,
    img: 'https://images.pexels.com/photos/2553658/pexels-photo-2553658.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Camilan tradisional khas Bogor dengan cita rasa otentik, cocok untuk teman minum teh atau oleh-oleh.'
    category: 'makanan-ringan'
  },
  {
    id: 'p5',
    name: 'Tas Ransel Kulit Sintetis',
    price: 200000,
    img: 'https://images.pexels.com/photos/267202/pexels-photo-267202.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Tas ransel dengan desain modern dan material kulit sintetis yang tahan lama, cocok untuk kerja atau kuliah.'
    category: 'fashion-bekas'
  },
  {
    id: 'p6',
    name: 'Jaket Hoodie Unik',
    price: 135000,
    img: 'https://images.pexels.com/photos/2540696/pexels-photo-2540696.jpeg?auto=compress&cs=tinysrgb&w=300',
    description: 'Jaket hoodie dengan desain unik dan bahan nyaman, ideal untuk gaya santai sehari-hari.'
   category: 'fashion-bekas'
  },
  {
  id: 'p7',
  name: 'Kopi Kingkong',
  price: 10000,
  img: 'https://github.com/Lapakabogor/LapAKABogor/blob/c3ad81079aa8ad479a69b1998c9aa03d0884f3fa/kingkong.jpg?raw=true',
  description: `Kopi Gula Singkong kami merupakan perpaduan rasa dan kualitas yang sempurna. 
Dibuat dari biji kopi bermutu tinggi dan gula singkong murni berkualitas tinggi, setiap teguk menawarkan rasa yang lembut namun khas. 

Kami hanya menggunakan bahan-bahan alami terbaik‚Äîasli, tanpa kompromi, dan dipilih dengan saksama‚Äîuntuk menghadirkan pengalaman minum kopi yang benar-benar elegan.  
Dari alamüçÉ, dibuat untuk seseorang yang benar-benar istimewa.`,
  category: 'minuman'
}
];

 const catalogEl = document.getElementById('catalog');
const cartBtn = document.getElementById('cartBtn');
const cartModal = document.getElementById('cartModal');
const closeCartBtn = document.getElementById('closeCartBtn');
const cartCountEl = document.getElementById('cartCount');
const cartContent = document.getElementById('cartContent');
const cartFooter = document.getElementById('cartFooter');
const cartTotalEl = document.getElementById('cartTotal');

let cart = {};

function formatPrice(num) {
  return num.toLocaleString('id-ID');
}

function renderCatalog(productsToRender) {
  catalogEl.innerHTML = '';
  if (productsToRender.length === 0) {
    catalogEl.innerHTML = '<p style="font-style:italic;color:#666;text-align:center;">Tidak ada produk ditemukan.</p>';
    return;
  }

  productsToRender.forEach(product => {
    const card = document.createElement('article');
    card.className = 'product-card';

    // Klik pada card akan membuka modal detail produk
    card.onclick = () => openModal(product.id);

    card.innerHTML = `
      <div class="product-image" style="background-image:url('${product.img}');"></div>
      <div class="product-info">
        <h3 class="product-name">${product.name}</h3>
        <div class="product-price">Rp ${formatPrice(product.price)}</div>
        <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart('${product.id}')">Tambah ke Keranjang</button>
      </div>
    `;

    catalogEl.appendChild(card);
  });
}

function openModal(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;

  // Isi konten modal dengan data produk
  const modal = document.getElementById('productModal');
  document.getElementById('modalImg').src = product.img;
  document.getElementById('modalTitle').textContent = product.name;
  document.getElementById('modalDesc').textContent = product.description;

  modal.style.display = 'flex'; // Tampilkan modal
}

function closeModal() {
  document.getElementById('productModal').style.display = 'none';
}

  function addToCart(productId) {
    if (cart[productId]) {
      cart[productId].qty++;
    } else {
      const product = products.find(p => p.id === productId);
      cart[productId] = {
        ...product,
        qty: 1
      };
    }
    updateCartUI();
    openCart();
  }

  function removeFromCart(productId) {
    delete cart[productId];
    updateCartUI();
  }

  function changeQty(productId, delta) {
    if (!cart[productId]) return;
    cart[productId].qty += delta;
    if (cart[productId].qty <= 0) {
      removeFromCart(productId);
    } else {
      updateCartUI();
    }
  }

  function updateCartUI() {
    const totalItems = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
    if (totalItems > 0) {
      cartCountEl.style.display = 'inline-block';
      cartCountEl.textContent = totalItems;
    } else {
      cartCountEl.style.display = 'none';
    }

    if (totalItems === 0) {
      cartContent.innerHTML = '<p style="text-align:center;color:#666;">Keranjang kosong.</p>';
      cartFooter.style.display = 'none';
    } else {
      cartFooter.style.display = 'block';
      renderCartItems();
    }
  }

  function renderCartItems() {
    cartContent.innerHTML = '';
    let totalPrice = 0;
    for (const key in cart) {
      const item = cart[key];
      totalPrice += item.price * item.qty;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <div class="cart-item-image" style="background-image:url('${item.img}');" aria-label="Gambar produk ${item.name}"></div>
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-qty" aria-label="Jumlah produk">
            <button aria-label="Kurangi jumlah" onclick="changeQty('${item.id}', -1)">-</button>
            <span>${item.qty}</span>
            <button aria-label="Tambah jumlah" onclick="changeQty('${item.id}', 1)">+</button>
          </div>
        </div>
        <div class="cart-item-price">Rp ${formatPrice(item.price * item.qty)}</div>
      `;
      cartContent.appendChild(div);
    }
    cartTotalEl.textContent = formatPrice(totalPrice);
  }

  function openCart() {
    cartModal.classList.add('open');
  }

  function closeCart() {
    cartModal.classList.remove('open');
  }

  cartBtn.addEventListener('click', () => {
    if (cartModal.classList.contains('open')) {
      closeCart();
    } else {
      openCart();
    }
  });
  closeCartBtn.addEventListener('click', closeCart);
let kategoriAktif = 'semua';

function filterByCategory(kategori) {
  kategoriAktif = kategori;

  document.querySelectorAll('.kategori-item').forEach(item => {
    item.classList.remove('active');
  });
  document.querySelector(`[data-kategori="${kategori}"]`)?.classList.add('active');

  const filtered = kategori === 'semua'
    ? products
    : products.filter(p => p.category === kategori);

  renderCatalog(filtered); // <‚Äì PENTING: jangan lupa render hasil filter!
}

// Inisialisasi kategori klik
document.querySelectorAll('.kategori-item').forEach(item => {
  item.addEventListener('click', () => {
    const kategori = item.getAttribute('data-kategori');
    filterByCategory(kategori);
  });
});

  function performSearch() {
    const query = document.getElementById('searchInput').value.trim().toLowerCase();
    if (query === '') {
      renderCatalog(products);
    } else {
      const filtered = products.filter(p => p.name.toLowerCase().includes(query));
      renderCatalog(filtered);
    }
  }
     document.getElementById('searchInput').addEventListener('input', performSearch);

     // Tampilkan semua produk saat pertama kali load
filterByCategory('semua');
     
function checkout() {
  if (Object.keys(cart).length === 0) {
    alert('Keranjang kosong.');
    return;
  }

  let summary = 'Pesanan Anda:\n\n';

  Object.values(cart).forEach(item => {
    summary += `- ${item.name} x ${item.qty} = Rp ${(item.price * item.qty).toLocaleString()}\n`;
  });

  const total = Object.values(cart).reduce((sum, item) => sum + item.price * item.qty, 0);
  summary += `\nTotal: Rp ${total.toLocaleString()}`;

  const metodePengantaran = document.querySelector('input[name="pengantaran"]:checked').value;
  summary += `\nMetode Pengantaran: ${metodePengantaran}`;

  if (metodePengantaran === "Diantar") {
    const alamat = document.getElementById('alamatPengantaran').value.trim();
    if (!alamat) {
      alert('Silakan masukkan lokasi pengantaran.');
      return;
    }
    summary += `\nAlamat Pengantaran: ${alamat}`;
  }

  // ‚úÖ Tambahkan bagian ini:
  const metodePembayaran = document.querySelector('input[name="pembayaran"]:checked');
  if (metodePembayaran) {
    summary += `\nMetode Pembayaran: ${metodePembayaran.value}`;
  }
  
  // ‚úÖ Ambil identitas konsumen
  const nama = document.getElementById("namaKonsumen").value.trim();
  const whatsapp = document.getElementById("noWhatsapp").value.trim();
  const catatan = document.getElementById("catatan").value.trim();
   
  pesan += `\n\n*Nama:* ${nama}\n*No. WhatsApp:* ${whatsapp}`;
  if (catatan !== "") {
    pesan += `\n*Catatan:* ${catatan}`;
  }
     
  summary += '\n\nSilakan kirim pesanan ini ke WhatsApp kami untuk diproses.';
  const waMessage = encodeURIComponent(summary);
  const waLink = `https://wa.me/6282125466588?text=${waMessage}`;
  window.open(waLink, '_blank');
}
function toggleAlamat() {
  const selected = document.querySelector('input[name="pengantaran"]:checked').value;
  const alamatInput = document.getElementById('alamatInput');
  if (selected === "Diantar") {
    alamatInput.style.display = 'block';
  } else {
    alamatInput.style.display = 'none';
  }
  
}
  // Inisialisasi awal
  renderCatalog(products);
  updateCartUI();
</script>
</body>
</html>
