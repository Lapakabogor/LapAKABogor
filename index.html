<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LapAKABogor - Platform Produk Mahasiswa Politeknik AKA Bogor</title>
  <meta name="description" content="Temukan berbagai produk danusan, inovasi mahasiswa, serta produk IKM kampus di LapAKABogor. Belanja mudah, aman, dan langsung terhubung ke WhatsApp penjual.">
  <meta name="keywords" content="LapAKABogor, danusan, produk mahasiswa, IKM, Politeknik AKA Bogor, ecommerce kampus, toko online AKA Bogor">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#f97316">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --jingga: #f97316;
      --jingga-dark: #db6e17;
      --biru: #2563eb;
      --biru-dark: #1d4ed8;
      --merah: #dc2626;
      --merah-dark: #b91c1c;
      --hijau: #16a34a;
      --hijau-dark: #15803d;
      --gray-light: #f3f4f6;
      --gray-medium: #e5e7eb;
      --gray-dark: #4b5563;
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      color: #333;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    a {
      color: inherit;
      text-decoration: none;
    }
    
    button {
      cursor: pointer;
      border: none;
      font-family: inherit;
      transition: all 0.2s ease;
    }
    
    img {
      max-width: 100%;
      height: auto;
      display: block;
    }
    
    input, textarea, select {
      font-family: inherit;
    }
    
    /* === SPLASH SCREEN === */
    #splashScreen {
      position: fixed;
      inset: 0;
      background: white;
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
      transition: opacity 0.5s ease;
    }
    
    #splashScreen.fade-out {
      opacity: 0;
      pointer-events: none;
    }
    
    .splash-content {
      text-align: center;
      animation: splashContentUp 0.8s ease;
    }
    
    .splash-logo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 1rem;
      border: 3px solid var(--jingga);
      box-shadow: var(--shadow-md);
    }
    
    .splash-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: #000;
    }
    
    .aka-highlight {
      color: var(--jingga);
    }
    
    @keyframes splashContentUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* === HEADER === */
    header {
      background: var(--jingga);
      color: white;
      display: flex;
      align-items: center;
      padding: 0.75rem 1.5rem;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: var(--shadow-md);
      flex-wrap: wrap;
      gap: 1rem;
    }
    
    .logo {
      font-weight: 700;
      font-size: 1.25rem;
      letter-spacing: 0.5px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .logo span {
      color: white;
      font-weight: 800;
    }
    
    .logo-img {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid white;
    }
    
    .search-bar {
      flex: 1;
      min-width: 200px;
      position: relative;
    }
    
    .search-bar input {
      width: 100%;
      padding: 0.6rem 1rem;
      border-radius: 2rem;
      border: none;
      font-size: 0.95rem;
      box-shadow: var(--shadow-sm);
    }
    
    .search-bar input:focus {
      outline: 2px solid var(--biru);
    }
    
    .search-bar button {
      position: absolute;
      right: 0.3rem;
      top: 50%;
      transform: translateY(-50%);
      background: var(--biru);
      color: white;
      padding: 0.4rem 1rem;
      border-radius: 2rem;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .search-bar button:hover {
      background: var(--biru-dark);
    }
    
    .icons {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .icon-btn {
      background: none;
      color: white;
      font-size: 1.5rem;
      position: relative;
      padding: 0.25rem;
    }
    
    .cart-count {
      position: absolute;
      top: -6px;
      right: -8px;
      background: var(--merah);
      color: white;
      font-size: 0.75rem;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 50%;
      min-width: 20px;
      text-align: center;
      display: none;
    }
    
    /* === MAIN CONTENT === */
    main {
      padding: 1.5rem;
      flex: 1;
    }
    
    .section-title {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: var(--gray-dark);
      position: relative;
      padding-bottom: 0.5rem;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--jingga);
    }
    
    /* === SLIDER === */
    .slider {
      overflow: hidden;
      width: 100%;
      aspect-ratio: 16 / 9;
      border-radius: 0.75rem;
      margin-bottom: 1rem;
      position: relative;
      border: 3px solid transparent;
      background: 
        linear-gradient(#fff, #fff) padding-box,
        linear-gradient(270deg, #ef4444, #2563eb, #10b981, #f97316, #ef4444) border-box;
      background-size: 800% 800%;
      animation: borderAnimation 15s ease infinite;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1),
                  0 0 12px rgba(249, 115, 22, 0.2);
    }

    @keyframes borderAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .slides {
  display: flex;
  width: 600%; /* 6 gambar */
  height: 100%;
  animation: slide 50s ease-in-out infinite;
}

   .slides img {
  flex: 0 0 16.66%;
  width: 16.66%;
      height: 100%;
      object-fit: contain;
      margin: 0;
      padding: 0;
      border: none;
      display: block;
    }

 /* === Animasi: 2s jeda awal + 2s jeda tengah (per gambar) === */
@keyframes slide {
  0%    { transform: translateX(0%); }        /* awal gambar 1 */
  4%    { transform: translateX(0%); }        /* jeda awal */
  8.33% { transform: translateX(-50%); }      /* jeda tengah */
  12.66%{ transform: translateX(-100%); }     /* geser ke gambar 2 */

  16.66%{ transform: translateX(-100%); }     /* jeda awal */
  20.99%{ transform: translateX(-150%); }     /* jeda tengah */
  25.32%{ transform: translateX(-200%); }     /* geser ke gambar 3 */

  29.32%{ transform: translateX(-200%); }
  33.65%{ transform: translateX(-250%); }
  37.98%{ transform: translateX(-300%); }

  41.98%{ transform: translateX(-300%); }
  46.31%{ transform: translateX(-350%); }
  50.64%{ transform: translateX(-400%); }

  54.64%{ transform: translateX(-400%); }
  58.97%{ transform: translateX(-450%); }
  63.3% { transform: translateX(-500%); }

  67.3% { transform: translateX(-500%); }
  71.63%{ transform: translateX(-550%); }
  75.96%{ transform: translateX(0%); } /* kembali ke awal */

  100%  { transform: translateX(0%); } /* selesai dan ulang */
}
    /* === PRODUCT CATALOG === */
    .catalog {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .product-card {
      background: white;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: var(--shadow-md);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }
    
    .product-image {
      width: 100%;
      height: 200px;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.05);
    }
    
    .product-info {
      padding: 1.25rem;
      display: flex;
      flex-direction: column;
      flex: 1;
    }
    
    .product-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: #222;
    }
    
    .product-price {
      color: var(--merah);
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }
    
    .add-cart-btn {
      background: var(--hijau);
      color: white;
      border-radius: 2rem;
      padding: 0.6rem 1rem;
      font-weight: 600;
      font-size: 0.95rem;
      margin-top: auto;
      align-self: flex-start;
    }
    
    .add-cart-btn:hover {
      background: var(--hijau-dark);
    }
    
    /* === MODAL === */
    .modal {
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      padding: 1rem;
    }
    
    .modal.show {
      opacity: 1;
      pointer-events: auto;
    }
    
    .modal-content {
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 1rem;
      max-width: 500px;
      width: 100%;
      position: relative;
      box-shadow: var(--shadow-lg);
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s ease;
    }
    
    .modal.show .modal-content {
      transform: translateY(0);
    }
    
    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      font-weight: 700;
      background: none;
      border: none;
      color: var(--gray-dark);
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    
    .close-modal:hover {
      background: var(--gray-light);
      color: #000;
    }
    
    .modal-img {
      width: 100%;
      border-radius: 0.75rem;
      margin-bottom: 1.5rem;
      max-height: 300px;
      object-fit: contain;
    }
    
    .modal-title {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #222;
    }
    
    .modal-desc {
      color: #444;
      line-height: 1.7;
      white-space: pre-line;
    }
    
    /* === CART MODAL === */
    #cartModal {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 450px;
      height: 100vh;
      background: white;
      box-shadow: -3px 0 10px rgba(0,0,0,0.1);
      transition: right 0.3s ease;
      z-index: 1000;
      display: flex;
      flex-direction: column;
    }
    
    #cartModal.open {
      right: 0;
    }
    
    .cart-header {
      background: var(--biru);
      color: white;
      padding: 1.25rem;
      font-weight: 700;
      font-size: 1.25rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .close-cart {
      background: rgba(255, 255, 255, 0.15);
      border: none;
      font-size: 1.25rem;
      color: white;
      cursor: pointer;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .close-cart:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    #cartScrollWrapper {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    
    #cartContent {
      flex: 1;
      padding: 1.25rem;
      background-color: #fafafa;
    }
    
    .cart-empty {
      text-align: center;
      color: #666;
      padding: 2rem 0;
    }
    
    .cart-item {
      display: flex;
      gap: 1rem;
      padding: 1rem;
      background: white;
      border-radius: 0.75rem;
      margin-bottom: 1rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-medium);
    }
    
    .cart-item-image {
      width: 80px;
      height: 80px;
      border-radius: 0.5rem;
      object-fit: cover;
      flex-shrink: 0;
      border: 1px solid var(--gray-medium);
    }
    
    .cart-item-info {
      flex: 1;
    }
    
    .cart-item-name {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #222;
    }
    
    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    
    .cart-item-qty button {
      background: var(--biru);
      color: white;
      width: 28px;
      height: 28px;
      font-weight: 700;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .cart-item-qty button:hover {
      background: var(--biru-dark);
    }
    
    .cart-item-qty span {
      min-width: 28px;
      text-align: center;
    }
    
    .cart-item-price {
      font-weight: 700;
      color: var(--merah);
      min-width: 80px;
      text-align: right;
      align-self: center;
    }
    
    .cart-footer {
      padding: 1.25rem;
      border-top: 1px solid var(--gray-medium);
      background: white;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    }
    
    .cart-total {
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--merah);
      text-align: right;
      margin-bottom: 1.5rem;
    }
    
    .form-group {
      margin-bottom: 1rem;
    }
    
    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #333;
      font-size: 0.95rem;
    }
    
    .form-control {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--gray-medium);
      border-radius: 0.5rem;
      font-size: 0.95rem;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--biru);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    textarea.form-control {
      min-height: 60px;
      resize: vertical;
    }
    
    .radio-group {
      margin-bottom: 1rem;
    }
    
    .radio-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      cursor: pointer;
      user-select: none;
    }
    
    .radio-label input {
      width: 16px;
      height: 16px;
    }
    
    .checkout-btn {
      width: 100%;
      background: var(--jingga);
      color: white;
      font-weight: 600;
      padding: 1rem;
      border-radius: 2rem;
      font-size: 1rem;
      margin-top: 1rem;
    }
    
    .checkout-btn:hover {
      background: var(--jingga-dark);
    }
    
    /* Delivery Options */
    .delivery-options {
      margin-bottom: 1rem;
      border: 1px solid var(--gray-medium);
      border-radius: 0.5rem;
      padding: 1rem;
    }
    
    .delivery-option {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .delivery-option:last-child {
      margin-bottom: 0;
    }
    
    .delivery-option input {
      margin-right: 0.5rem;
    }
    
    .delivery-location {
      margin-top: 0.5rem;
      margin-left: 1.5rem;
      display: none;
    }
    
    .delivery-location select {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid var(--gray-medium);
      border-radius: 0.25rem;
    }
    
    /* Product Notes */
    .product-notes {
      margin-top: 0.5rem;
      font-size: 0.85rem;
    }
    
    .product-notes textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid var(--gray-medium);
      border-radius: 0.25rem;
      font-size: 0.85rem;
      min-height: 40px;
      margin-top: 0.25rem;
    }
    
    /* === FOOTER === */
    footer {
      background: #222;
      color: white;
      padding: 2rem 1.5rem;
      text-align: center;
      margin-top: 3rem;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .footer-logo {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    
    .footer-link {
      color: #ccc;
      transition: color 0.2s ease;
    }
    
    .footer-link:hover {
      color: white;
    }
    
    .copyright {
      color: #aaa;
      font-size: 0.9rem;
    }
    
    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      header {
        padding: 0.75rem 1rem;
        gap: 0.75rem;
      }
      
      .logo {
        font-size: 1.1rem;
      }
      
      .logo-img {
        width: 36px;
        height: 36px;
      }
      
      main {
        padding: 1rem;
      }
      
      .catalog {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 1rem;
      }
      
      #cartModal {
        max-width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      header {
        flex-direction: column;
        text-align: center;
      }
      
      .logo {
        margin-bottom: 0.5rem;
      }
      
      .search-bar {
        width: 100%;
        order: 3;
      }
      
      .catalog {
        grid-template-columns: 1fr;
      }
      
      .product-card {
        max-width: 100%;
      }
      
      .cart-item {
        flex-direction: column;
      }
      
      .cart-item-image {
        width: 100%;
        height: 120px;
      }
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div id="splashScreen">
    <div class="splash-content">
      <img src="lapakabogor-splash.jpg" alt="Logo LapAKABogor" class="splash-logo">
      <h1 class="splash-title">
        Selamat Datang di <span>Lap</span><span class="aka-highlight">AKA</span>Bogor
      </h1>
    </div>
  </div>
  
  <!-- Header -->
  <header>
    <div class="logo">Lap<span>AKA</span>Bogor</div>
    
    <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/70fe764ad7c8a3f220d41572d96e9fba7e910ec2/WhatsApp%20Image%202025-05-01%20at%2018.04.48_78f2ec38.jpg" 
         alt="Logo LapAKABogor" 
         class="logo-img">

    <form class="search-bar" onsubmit="event.preventDefault(); performSearch();">
      <input type="search" id="searchInput" placeholder="Cari produk, UKM, atau kategori..." aria-label="Cari produk">
      <button type="submit">Cari</button>
    </form>

    <div class="icons">
      <button class="icon-btn" id="cartBtn" aria-label="Keranjang Belanja">
        üõí<span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Slider --> 
    <div class="slider">
      <div class="slides">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/09c2de1f9e0dc435fbcd163308ee462feaee6e05/nowbi%20iklan.png" alt="Iklan Nowbi Stick Ubi Ungu">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/09c2de1f9e0dc435fbcd163308ee462feaee6e05/IKLAN%20kingkong.png" alt="Iklan Kopi Kingkong">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/09c2de1f9e0dc435fbcd163308ee462feaee6e05/IKLAN%20yogood.png" alt="Iklan Yogood Mochi">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/e1c6f548e955b3e7c91ff8cb929cb9e98c805224/IKLAN%20bochiz.png" alt="Iklan Bochiz Spaghetti (versi baru)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/4b419e905c47a900c09e1cf4aa3b67efbf1d1c01/iklan%201.jpg" alt="Iklan Produk Ke-5">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/40fd02d6a569cd0bd94cd860017d92a1388bfc7f/iklan%20dimsum-1.png" alt="Iklan Dimsum">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/40fd02d6a569cd0bd94cd860017d92a1388bfc7f/iklan%20serenitie-1.png" alt="Iklan Serenitie">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/main/chicken_ricebowl.jpg" alt="Iklan Chicken Ricebowl">

        <!-- Duplikat gambar untuk transisi mulus -->
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/09c2de1f9e0dc435fbcd163308ee462feaee6e05/nowbi%20iklan.png" alt="Iklan Nowbi (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/09c2de1f9e0dc435fbcd163308ee462feaee6e05/IKLAN%20kingkong.png" alt="Iklan Kopi Kingkong (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/09c2de1f9e0dc435fbcd163308ee462feaee6e05/IKLAN%20yogood.png" alt="Iklan Yogood Mochi (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/e1c6f548e955b3e7c91ff8cb929cb9e98c805224/IKLAN%20bochiz.png" alt="Iklan Bochiz Spaghetti (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/4b419e905c47a900c09e1cf4aa3b67efbf1d1c01/iklan%201.jpg" alt="Iklan Produk Ke-5 (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/40fd02d6a569cd0bd94cd860017d92a1388bfc7f/iklan%20dimsum-1.png" alt="Iklan Dimsum (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/40fd02d6a569cd0bd94cd860017d92a1388bfc7f/iklan%20serenitie-1.png" alt="Iklan Serenitie (copy)">
        <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/main/chicken_ricebowl.jpg" alt="Iklan Chicken Ricebowl (copy)">
      </div>
    </div>

    <h2 class="section-title">Produk Mahasiswa</h2>
    
    <!-- Product Catalog -->
    <section class="catalog" id="catalog"></section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-logo">Lap<span>AKA</span>Bogor</div>
      <div class="footer-links">
        <a href="#" class="footer-link">Tentang Kami</a>
        <a href="#" class="footer-link">Kebijakan Privasi</a>
        <a href="#" class="footer-link">Syarat & Ketentuan</a>
        <a href="#" class="footer-link">Kontak</a>
      </div>
      <p class="copyright">¬© 2025 LapAKABogor. Seluruh hak cipta dilindungi.</p>
    </div>
  </footer>

  <!-- Product Modal -->
  <div id="productModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">&times;</button>
      <img id="modalImg" src="" alt="Gambar Produk" class="modal-img">
      <h2 id="modalTitle" class="modal-title"></h2>
      <p id="modalDesc" class="modal-desc"></p>
    </div>
  </div>

  <!-- Cart Modal -->
  <aside id="cartModal" aria-label="Keranjang Belanja">
    <div class="cart-header">
      Keranjang Belanja
      <button class="close-cart" id="closeCartBtn" aria-label="Tutup Keranjang">&times;</button>
    </div>

    <div id="cartScrollWrapper">
      <div id="cartContent">
        <p class="cart-empty">Keranjang kosong.</p>
      </div>

      <div class="cart-footer">
        <div class="cart-total">Total: Rp <span id="cartTotal">0</span></div>
        
        <!-- Customer Info -->
        <div class="form-group">
          <label for="namaKonsumen">Nama Lengkap</label>
          <input type="text" id="namaKonsumen" class="form-control" placeholder="Masukkan nama lengkap" required>
        </div>
        
        <div class="form-group">
          <label for="noWhatsapp">Nomor WhatsApp</label>
          <input type="tel" id="noWhatsapp" class="form-control" placeholder="Contoh: 089612345678" required>
        </div>
        
        <!-- Delivery Options -->
        <div class="delivery-options">
          <h3 style="margin-bottom: 0.5rem; font-size: 1rem;">Metode Pengiriman</h3>
          
          <div class="delivery-option">
            <input type="radio" id="pickup" name="delivery" value="pickup" checked>
            <label for="pickup">Ambil Sendiri (Gedung G) - Rp0</label>
          </div>
          
          <div class="delivery-option">
            <input type="radio" id="delivery" name="delivery" value="delivery">
            <label for="delivery">Diantar (+Rp500/produk)</label>
            <div class="delivery-location" id="deliveryLocation">
              <select id="deliveryPlace">
                <option value="Gedung A">Gedung A</option>
                <option value="Gedung B">Gedung B</option>
                <option value="Gedung C">Gedung C</option>
                <option value="Gedung D">Gedung D</option>
                <option value="Gedung E">Gedung E</option>
                <option value="Gedung F">Gedung F</option>
                <option value="Masjid NAJ">Masjid NAJ</option>
                <option value="Post Satpam">Post Satpam</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Payment Method -->
        <div class="radio-group">
          <label>Metode Pembayaran</label>
          <div class="radio-label">
            <input type="radio" name="pembayaran" id="qris" value="QRIS" checked>
            <label for="qris">QRIS (Scan untuk Membayar)</label>
          </div>
        </div>
        
        <!-- Catatan -->
        <div class="payment-note">
          <p><em>Silahkan konfirmasi terlebih dahulu pada WhatsApp sebelum membayar.</em></p>
        </div>
        
        <button class="checkout-btn" onclick="checkout()">Checkout via WhatsApp</button>
      </div>
    </div>
  </aside>

  <!-- QRIS Payment Modal -->
<div id="qrisPaymentModal" class="modal">
  <div class="modal-content" style="max-width: 320px; text-align: center;">
    <button class="close-modal" onclick="closeQRISPaymentModal()">&times;</button>
    <h3 style="margin-bottom: 1rem;">Pembayaran QRIS</h3>
    
    <div style="background: #f8f8f8; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
      <img src="https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/f19880fd91f150d1e4da2e65d7b54ed5b890ea94/QRIS%20LAPAKA.png" 
           alt="QR Code Pembayaran" 
           style="width: 100%; max-width: 250px; margin: 0 auto; display: block;">
    </div>
    
    <p style="color: #e53e3e; font-weight: 500; margin-bottom: 1.5rem;">
      ‚ö†Ô∏è Silahkan screenshot QRIS ini sebagai bukti pembayaran
    </p>
    
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="closeQRISPaymentModal()" 
              style="flex: 1; padding: 0.75rem; background: #e2e8f0; border: none; border-radius: 0.5rem;">
        Tutup
      </button>
      <button id="proceedToWhatsAppBtn" 
              style="flex: 1; padding: 0.75rem; background: var(--hijau); color: white; border: none; border-radius: 0.5rem;">
        Lanjut ke WhatsApp
      </button>
    </div>
  </div>
</div>

<script>
    // Splash screen
    window.addEventListener('DOMContentLoaded', () => {
      const splash = document.getElementById('splashScreen');
      
      // Tunda 3 detik sebelum mulai menghilang
      setTimeout(() => {
        splash.classList.add('fade-out');

        // Hapus elemen dari DOM setelah transisi selesai (0.5 detik sesuai CSS)
        setTimeout(() => {
          splash.remove();
        }, 500);
      }, 3000); // Durasi splash muncul (3 detik)
    });
     
const products = [
  {
    id: 'p1',
    name: 'Stick Ubi Ungu NanoKelor 75 gram CLOSE ORDER',
    price: 10000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/b829aa7ec3b23db0f6145105a9dcd4439e75f1d0/NOWWBI.jpg',
    description: 'Stick ubi ungu dengan nanoflavour daun kelor yang menyehatkan sekaligus membuat harimu menyenangkan. ' +
                 'Pilihan rasa: Karameloor (karamel + kelor), Green Zeen (green tea + kelor), Chocokick (dark choco + kelor), ' +
                 'Seayo Green (seaweed + kelor), dan Bali Breeze (sambal matah + kelor). ' +
                 'Tersedia dua ukuran: 75 gram (Rp10.000) dan 40 gram (Rp7.000).'
  },
  {
    id: 'p2',
    name: 'Kopi Kingkong CLOSE ORDER',
    price: 10000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/627983ed8999c02dca972274fdc3e8a48971f1c7/kingkong%202.jpg',
    description: 'Kopi Gula Singkong kami merupakan perpaduan rasa dan kualitas yang sempurna. ' +
                 'Dibuat dari biji kopi bermutu tinggi dan gula singkong murni berkualitas tinggi, ' +
                 'setiap teguk menawarkan rasa yang lembut namun khas. Kami hanya menggunakan bahan-bahan alami terbaik‚Äî' +
                 'asli, tanpa kompromi, dan dipilih dengan saksama‚Äîuntuk menghadirkan pengalaman minum kopi yang benar-benar elegan.\n' +
                 'Dari alamüçÉ, dibuat untuk seseorang yang benar-benar istimewaüíå'
  },
  {
      id: 'p3',
    name: 'Baso Aci Kuah Keju OPEN ORDER (Ready Senin, 16 Juni 2025)',
    price: 18000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/afb6ad59744cbb2cd4c97506294969f92706abfc/close%20order.png',
    description: 'Inovasi kekinian yang siap menggoyang lidahmu! Dibuat dari aci pilihan yang kenyal maksimal, ' +
                 'dipadukan dengan kuah gurih bercita rasa khas, lalu disempurnakan dengan lelehan keju creamy yang bikin meleleh di setiap suapan.'
  },
  {
    id: 'p4',
    name: 'Yo!Good Yoghurt Jus Buah CLOSE ORDER',
    price: 15000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/0d49fb5372bfaa056bfaea11f3cc754c6598997c/yogooddd.jpg',
    description: 'Minuman yoghurt sehat yang dipadukan dengan jus buah segar seperti mangga manis, strawberry segar, dan pisang lembut. Kaya akan probiotik, vitamin, dan serat alami, dibuat tanpa pengawet dan dengan pemanis alami dari ekstrak stevia.'
  },
  {
    id: 'p5',
    name: 'PRELOVE BASE HYPOCROLLUS ACID SPRAY',
    price: 25000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/edfa11b58e471b7c6374d3892134b86f9aa2d453/Produk%20Nada%201.jpg',
    description: 'Isi 70%. Dijual karena sedang menggunakan produk dokter. Exp: 06-02-2026.'
  },
  {
    id: 'p6',
    name: "PRELOVE PARFUME CHART D'AMOUR EDP",
    price: 40000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/edfa11b58e471b7c6374d3892134b86f9aa2d453/Produk%20Nada%202.jpg',
    description: `Brand new, belum pernah dipakai sama sekali.
Top notes: blueberry, bergamot, ginger.
Middle notes: rose, jasmine.
Base notes: musk, cypress, patchouli.
Exp: 07-2026.`
  },
  {
    id: 'p7',
    name: 'PRELOVEDD INSTAPERFECT FOUNDATION',
    price: 30000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/edfa11b58e471b7c6374d3892134b86f9aa2d453/Produk%20Nada%203.jpg',
    description: 'Shade: 33 warm olive. Isi 50%. Exp: 29-09-2026.'
  },
  {
    id: 'p8',
    name: 'Stick Ubi Ungu NanoKelor 40 gram CLOSE ORDER',
    price: 7000,
    img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/637cae58b6fd7a9bed4250c507215aece123a722/nowbii.jpg',
    description: 'Stick ubi ungu dengan nanoflavour daun kelor yang menyehatkan sekaligus membuat harimu menyenangkan. ' +
                 'Pilihan rasa: Karameloor (karamel + kelor), Green Zeen (green tea + kelor), Chocokick (dark choco + kelor), ' +
                 'Seayo Green (seaweed + kelor), dan Bali Breeze (sambal matah + kelor). ' +
                 'Tersedia dua ukuran: 75 gram (Rp10.000) dan 40 gram (Rp7.000).'
  },
  {
  id: 'p9',
  name: 'Puding Sedot (Pend!ng) OPEN PO',
  price: 9000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/e601c9a19e7cf14935f239c74321d0fd2af54acc/pending.jpg',
  description: `ChocoD!ng - BerryD!ng - TaroD!ng

Puding yang dibuat dengan susu segar,
dengan tambahan selai strawberry,
dilengkapi dengan saus susu keju yang
terbuat dari susu full cream dan keju oles,
menghasilkan tekstur creamy dan pastinya bergizi.`
},
    {
  id: 'p10',
  name: 'Puding Sedot (Pend!ng) PROMO BELI 2, OPEN PO',
  price: 17000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/e601c9a19e7cf14935f239c74321d0fd2af54acc/pending.jpg',
  description: `ChocoD!ng - BerryD!ng - TaroD!ng

Puding yang dibuat dengan susu segar,
dengan tambahan selai strawberry,
dilengkapi dengan saus susu keju yang
terbuat dari susu full cream dan keju oles,
menghasilkan tekstur creamy dan pastinya bergizi.`
},
{
  id: 'p11',
  name: 'SereniTea OPEN ORDER',
  price: 28000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/e601c9a19e7cf14935f239c74321d0fd2af54acc/sereniti.jpg',
  description: `SereniTea adalah Reed Diffuser dengan aroma menenangkan yang menghadirkan 
suasana damai dan rileks di ruangan. Produk ini menggunakan minyak wangi berkualitas
yang diserap oleh stick, sehingga aroma harum tersebar secara alami dan konsisten
tanpa perlu dinyalakan atau menggunakan listrik. SereniTea cocok untuk menciptakan
atmosfer santai di ruang tamu, kamar tidur, atau ruang kerja. Hal ini membantu
meningkatkan mood dan kenyamanan sepanjang hari. Kemasan elegan dan isi yang
tahan lama, Reed Diffuser SereniTea menjadi pilihan ideal untuk mempercantik sekaligus
mengharumkan ruangan secara praktis dan aesthetic.`
},
  {
  id: 'p12',
  name: 'BananaBoom!! CLOSE ORDER',
  price: 5000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/414851a6e24fb1ed97cfdd9dbf163e05980b9310/piscok.jpg',
  description: 'BananaBoom menyajikan merek camilan murah dan enak juga kekinian yang menghadirkan kombinasi pisang matang dan coklat lumer dibalut kulit kruk. Cocok untuk semua kalangan usia terutama remaja dan anak muda yang suka ngemil. Isi: 2 pcs.'
},
  {
  id: 'p13',
  name: 'Dimsum Mentai S (4 pcs)',
  price: 20000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/29346c7407722d0270c337b4b8ff05493fedf418/ChatGPT%20Image%2022%20Mei%202025%2C%2019.11.54.png',
  description: 'Porsi kecil berisi 4 pcs dimsum ayam lembut dengan siraman saus mentai khas Lavila. Sudah termasuk chili oil. Cocok untuk camilan ringan atau buat kamu yang baru pertama kali mencoba.'
},
{
  id: 'p14',
  name: 'Dimsum Mentai M (6 pcs)',
  price: 28000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/29346c7407722d0270c337b4b8ff05493fedf418/ChatGPT%20Image%2022%20Mei%202025%2C%2019.11.54.png',
  description: 'Porsi sedang berisi 6 pcs dimsum ayam dengan saus mentai creamy khas Lavila. Sudah termasuk chili oil. Pas buat porsi sendiri dengan rasa yang lebih puas.'
},
{
  id: 'p15',
  name: 'Dimsum Mentai L (10 pcs)',
  price: 40000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/29346c7407722d0270c337b4b8ff05493fedf418/ChatGPT%20Image%2022%20Mei%202025%2C%2019.11.54.png',
  description: 'Porsi besar berisi 10 pcs dimsum ayam dengan saus mentai spesial Lavila dan chili oil. Cocok untuk berbagi atau makan kenyang sendiri.'
},
{
  id: 'p16',
  name: 'Dimsum Mentai XL (16 pcs)',
  price: 68000,
  img: 'https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/29346c7407722d0270c337b4b8ff05493fedf418/ChatGPT%20Image%2022%20Mei%202025%2C%2019.11.54.png',
  description: 'Porsi jumbo berisi 16 pcs dimsum ayam dengan saus mentai creamy dan chili oil khas Lavila. Pas banget untuk dinikmati rame-rame bareng keluarga atau teman.'
},
  {
    "id": "p17",
    "name": "Abatex Deospray OPEN ORDER",
    "price": 10000,
    "img": "https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/d3df85ff775b8ca1fcfdf0ea0609b3fff9c5e466/abatex.jpg",
    "description": "Abatex Deospray hadir untuk kamu yang aktif dan ingin tampil percaya diri tanpa khawatir bau badan! Dengan formula anti-bakteri dan aroma menyegarkan, deodoran ini menjaga kesegaran hingga 24 jam. Isi: 60 ml. Varian aroma: baby powder, fresh fruit. Cara pakai: Kocok dahulu dan semprotkan pada ketiak dari jarak ¬±15 cm setelah mandi atau saat dibutuhkan. Tips: Gunakan setiap hari dan simpan di tempat sejuk."
  },
  {
  "id": "p18",
  "name": "Mochi Gendut CLOSE ORDER)",
  "price": 8000,
  "img": "https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/70cf4be00f255384c7cd334a91628886f89f770d/mochi.jpg",
  "description": "Mochi Gendut ‚Äì Mochi lembut isi lumer kini hadir di LapAKABogor! Lembut, lumer, dan bikin nagih! Mochi berisi krim lumer dan buah segar, siap manjain lidahmu. Camilan kekinian yang cocok buat hadiah, camilan santai, atau self-reward setelah hari panjang!‚ú® Varian Rasa: üçì Strawberry Cheesecake ‚Äì manis-asam segar üç´ Milky Choco ‚Äì coklat susu lumer üç™ Cookies n Cream ‚Äì crunchy & creamy. ‚ùÑ Nikmat disajikan dingin üéÅ Wajib coba buat pecinta mochi! Open pre-order hingga hari Selasa, 27 Mei! Ready di hari Rabu, 28 Mei! Stok terbatas, jangan sampai kehabisan!"
},
{
  "id": "p19",
  "name": "Cheesecuit CLOSE ORDER",
  "price": 6000,
  "img": "https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/5643ba7e030863d32afb77b859d98b5058946b61/Cheese%20Cuit.jpg",
  "description": "Cheesecuit ‚Äì Cheesecake renyah & lumer kini hadir di LapAKABogor! Camilan unik yang memadukan biskuit renyah dengan cream cheese lembut. Rasanya ngeju, lumer, dan bikin nagih!‚ú® Pilihan Rasa: üç™ Cookies and Cream üç´ Coklat üçì Strawberry üßÄ Keju. Pas banget buat teman nugas, ngemil santai, atau kasih ke orang tersayang! Open pre-order hingga hari Selasa, 27 Mei! Ready di hari Rabu, 28 Mei! Stok terbatas, jangan sampai kehabisan!"
},
  {
  "id": "p20",
  "name": "PRO WHITE Day Cream with SPF (Promo)",
  "price": 25000,
  "img": "https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/bed77446809e57bdd8889b098eb90622da6fba78/daycream%20cycil.jpg",
  "description": "‚ú®PROMO HEMAT!‚ú® PRO WHITE Day Cream kini hanya Rp25.000 dari harga normal Rp75.000! Krim siang dengan formula ringan dan SPF yang cocok untuk semua jenis kulit. Melembapkan, mencerahkan, dan melindungi kulit sepanjang hari. üóì Open order sampai 6 Juni, ambil pesanan tanggal 10 Juni. Buruan, stok terbatas!"
},
{
  "id": "p21",
  "name": "PRO WHITE Bright and Glow Facial Soap (Promo)",
  "price": 15000,
  "img": "https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/bed77446809e57bdd8889b098eb90622da6fba78/sabun%20cycil.jpg",
  "description": "üì¢PROMO 2 LEBIH HEMAT!üì¢ PRO WHITE Bright and Glow Facial Soap hanya Rp15.000 untuk 2 pcs! Sabun wajah herbal dengan ekstrak alami, membersihkan secara menyeluruh tanpa membuat kulit kering. Cocok untuk semua jenis kulit. üóì Open order sampai 6 Juni, ambil pesanan tanggal 10 Juni. Yuk order sekarang sebelum kehabisan!"
},
  {
  "id": "p22",
  "name": "Chicken Ricebowl (CLOSE ORDER)",
  "price": 5000,
  "img": "https://raw.githubusercontent.com/Lapakabogor/LapAKABogor/fa041956d5b1bbd3048c340db01e9aa1b6219d22/ricebowl.png",
  "description": "üçó Chicken Ricebowl spesial dengan ayam krispi saus gurih manis dan taburan wijen, disajikan segar di atas daun selada. Cocok untuk makan siang praktis dan nikmat!\nüìÖ Open PO: Jumat, 13 Juni 2025\nüí∏ Harga Spesial: dari 10rb jadi cuma 5rb!\nSegera pesan di LapAKABogor.com dan nikmati kelezatannya!"
}
    ];


  const catalogEl = document.getElementById('catalog');
  const cartBtn = document.getElementById('cartBtn');
  const cartModal = document.getElementById('cartModal');
  const closeCartBtn = document.getElementById('closeCartBtn');
  const cartCountEl = document.getElementById('cartCount');
  const cartContent = document.getElementById('cartContent');
  const cartFooter = document.getElementById('cartFooter');
  const cartTotalEl = document.getElementById('cartTotal');
  let cart = {};
  let whatsappPaymentLink = "";

  function formatPrice(num) {
    return num.toLocaleString('id-ID');
  }

function renderCatalog(productsToRender) {
  catalogEl.innerHTML = '';
  if (productsToRender.length === 0) {
    catalogEl.innerHTML = '<p style="font-style:italic;color:#666;text-align:center;">Tidak ada produk ditemukan.</p>';
    return;
  }

  productsToRender.forEach(product => {
    const card = document.createElement('article');
    card.className = 'product-card';
    card.onclick = () => openModal(product.id);

    card.innerHTML = `
      <div class="product-image" style="
        background-image: url('${product.img}');
        background-size: cover;
        background-position: center;
        height: 180px;
        border-radius: 1.25rem 1.25rem 0 0;
      "></div>
      <main>
        <div class="product-name">${product.name}</div>
        <div class="product-price">Rp ${formatPrice(product.price)}</div>
        <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart('${product.id}')">
          Tambah ke Keranjang
        </button>
      </main>
    `;

    catalogEl.appendChild(card);
  });
}

function openModal(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;

  const modal = document.getElementById('productModal');
  document.getElementById('modalImg').src = product.img;
  document.getElementById('modalTitle').textContent = product.name;
  document.getElementById('modalDesc').textContent = product.description;

  modal.style.display = 'flex';
  setTimeout(() => modal.classList.add('show'), 10); // untuk efek animasi
}

function closeModal() {
  const modal = document.getElementById('productModal');
  modal.classList.remove('show');
  setTimeout(() => {
    modal.style.display = 'none';
  }, 200); // tunggu animasi selesai
}

function addToCart(productId) {
  if (cart[productId]) {
    cart[productId].qty++;
  } else {
    const product = products.find(p => p.id === productId);
    if (!product) return; // cegah error jika produk tidak ditemukan
    cart[productId] = {
      ...product,
      qty: 1
    };
  }
  updateCartUI();
  openCart();
}

function removeFromCart(productId) {
  if (cart[productId]) {
    delete cart[productId];
    updateCartUI();
  }
}

function changeQty(productId, delta) {
  if (!cart[productId]) return;
  cart[productId].qty += delta;
  if (cart[productId].qty <= 0) {
    removeFromCart(productId);
  } else {
    updateCartUI();
  }
}

function updateCartUI() {
  const totalItems = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);

  // Update indikator jumlah produk di ikon keranjang
  if (totalItems > 0) {
    cartCountEl.style.display = 'inline-block';
    cartCountEl.textContent = totalItems;
  } else {
    cartCountEl.style.display = 'none';
  }

  // Update tampilan isi keranjang dan footer
  if (totalItems === 0) {
    // Keranjang kosong
    cartContent.innerHTML = '<p style="text-align:center;color:#666;">Keranjang kosong.</p>';
    cartFooter.style.display = 'none'; // sembunyikan footer total & checkout
  } else {
    // Ada isi keranjang
    renderCartItems(); // render list produk di keranjang
    cartFooter.style.display = 'block'; // tampilkan footer total & checkout
  }
}

function renderCartItems() {
  const cartContent = document.getElementById('cartContent');
  const cartTotalEl = document.getElementById('cartTotal');
  cartContent.innerHTML = '';

  let totalPrice = 0;

  for (const key in cart) {
    const item = cart[key];
    totalPrice += item.price * item.qty;

    const div = document.createElement('div');
    div.className = 'cart-item';
    div.style.display = 'flex';
    div.style.justifyContent = 'space-between';
    div.style.alignItems = 'center';
    div.style.padding = '10px 0';
    div.style.borderBottom = '1px solid #ddd';

    div.innerHTML = `
      <div class="cart-item-image" style="background-image:url('${item.img}'); width: 50px; height: 50px; background-size: cover; background-position: center; border-radius: 8px;" aria-label="Gambar produk ${item.name}"></div>
      <div class="cart-item-info" style="flex: 1; margin-left: 10px;">
        <div class="cart-item-name" style="font-weight: bold;">${item.name}</div>
        <div class="cart-item-qty" aria-label="Jumlah produk" style="margin-top: 4px;">
          <button aria-label="Kurangi jumlah" onclick="changeQty('${item.id}', -1)">‚àí</button>
          <span style="margin: 0 8px;">${item.qty}</span>
          <button aria-label="Tambah jumlah" onclick="changeQty('${item.id}', 1)">+</button>
        </div>
      </div>
      <div class="cart-item-price" style="min-width: 80px; text-align: right;">Rp ${formatPrice(item.price * item.qty)}</div>
    `;

    cartContent.appendChild(div);
  }

  cartTotalEl.textContent = formatPrice(totalPrice);
}

function openCart() {
  cartModal.classList.add('open');
}

function closeCart() {
  cartModal.classList.remove('open');
}

cartBtn.addEventListener('click', () => {
  if (cartModal.classList.contains('open')) {
    closeCart();
  } else {
    openCart();
  }
});
closeCartBtn.addEventListener('click', closeCart);

function performSearch() {
  const query = document.getElementById('searchInput').value.trim().toLowerCase();
  if (query === '') {
    renderCatalog(products);
  } else {
    const filtered = products.filter(p => p.name.toLowerCase().includes(query));
    renderCatalog(filtered);
  }
}

function prepareWhatsAppMessage() {
    const nama = document.getElementById("namaKonsumen").value.trim();
    const whatsapp = document.getElementById("noWhatsapp").value.trim();
    const deliveryMethod = document.querySelector('input[name="delivery"]:checked').value;
    const deliveryPlace = document.getElementById("deliveryPlace").value;
    
    // Calculate total price including delivery fees
    let totalPrice = 0;
    let deliveryFee = 0;
    let totalItems = 0;
    
    for (const [id, item] of Object.entries(cart)) {
      totalPrice += item.price * item.qty;
      totalItems += item.qty;
    }
    
    // Add delivery fee if delivery option is selected
    if (deliveryMethod === "delivery") {
      deliveryFee = totalItems * 500;
      totalPrice += deliveryFee;
    }
    
    let summary = "*Pesanan LapAKABogor Anda:*\n\n";
    
    // List all products
    for (const [id, item] of Object.entries(cart)) {
      summary += `- ${item.name} (${item.qty} x Rp ${item.price.toLocaleString()})\n`;
      
      // Add product-specific notes if available
      if (item.note) {
        summary += `  *Catatan:* ${item.note}\n`;
      }
    }
    
    // Add delivery information
    summary += `\n*Metode Pengiriman:* ${deliveryMethod === "pickup" ? "Ambil Sendiri di Gedung G" : `Diantar ke ${deliveryPlace}`}`;
    
    if (deliveryFee > 0) {
      summary += `\n*Biaya Pengiriman:* Rp ${deliveryFee.toLocaleString()}`;
    }
    
    // Add totals
    summary += `\n\n*Total Harga Produk:* Rp ${(totalPrice - deliveryFee).toLocaleString()}`;
    if (deliveryFee > 0) {
      summary += `\n*Total Biaya Pengiriman:* Rp ${deliveryFee.toLocaleString()}`;
    }
    summary += `\n*Total Pembayaran:* Rp ${totalPrice.toLocaleString()}`;
    
    // Add customer info
    summary += `\n\n*Nama Pemesan:* ${nama}`;
    summary += `\n*Nomor WhatsApp:* ${whatsapp}`;
    
    // Add payment method
    summary += `\n*Metode Pembayaran:* QRIS`;
    
    summary += '\n\n(Saya sudah membayar via QRIS dan melampirkan bukti screenshot)';
    
    whatsappPaymentLink = `https://wa.me/6282125466588?text=${encodeURIComponent(summary)}`;
  }

  function showQRISPaymentModal() {
    // Validate form first
    const nama = document.getElementById("namaKonsumen").value.trim();
    const whatsapp = document.getElementById("noWhatsapp").value.trim();
    
    if (!nama || !whatsapp) {
      alert("Silakan isi nama dan nomor WhatsApp terlebih dahulu.");
      return;
    }
    
    // Check if delivery method is selected
    const deliveryMethod = document.querySelector('input[name="delivery"]:checked');
    if (!deliveryMethod) {
      alert("Silakan pilih metode pengiriman.");
      return;
    }
    
    // If delivery is selected but no place is chosen
    if (deliveryMethod.value === "delivery" && !document.getElementById("deliveryPlace").value) {
      alert("Silakan pilih tempat pengantaran.");
      return;
    }

    // Prepare WhatsApp message
    prepareWhatsAppMessage();
    
    // Show QRIS payment modal
    const modal = document.getElementById('qrisPaymentModal');
    modal.style.display = 'flex';
    setTimeout(() => modal.classList.add('show'), 10);
    
    // Setup the WhatsApp button
    document.getElementById('proceedToWhatsAppBtn').onclick = function() {
      window.open(whatsappPaymentLink, '_blank');
      closeQRISPaymentModal();
      closeCart(); // Close cart modal after proceeding
    };
  }

  function closeQRISPaymentModal() {
    const modal = document.getElementById('qrisPaymentModal');
    modal.classList.remove('show');
    setTimeout(() => {
      modal.style.display = 'none';
    }, 200);
  }

  function checkout() {
    // Show QRIS payment modal instead of going directly to WhatsApp
    showQRISPaymentModal();
  }

  // Handle delivery option changes
  document.querySelectorAll('input[name="delivery"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const deliveryLocation = document.getElementById('deliveryLocation');
      if (this.value === 'delivery') {
        deliveryLocation.style.display = 'block';
      } else {
        deliveryLocation.style.display = 'none';
      }
      updateCartTotal(); // Update total when delivery option changes
    });
  });

  // Update cart total when delivery place changes
  document.getElementById('deliveryPlace').addEventListener('change', function() {
    updateCartTotal();
  });

  // Function to update cart total with delivery fee
  function updateCartTotal() {
    let total = 0;
    let totalItems = 0;
    
    for (const [id, item] of Object.entries(cart)) {
      total += item.price * item.qty;
      totalItems += item.qty;
    }
    
    // Add delivery fee if delivery option is selected
    const deliveryMethod = document.querySelector('input[name="delivery"]:checked');
    if (deliveryMethod && deliveryMethod.value === "delivery") {
      total += totalItems * 500;
    }
    
    document.getElementById('cartTotal').textContent = total.toLocaleString('id-ID');
  }

  // Close modal when clicking outside
  window.addEventListener('click', function(event) {
    const modal = document.getElementById('qrisPaymentModal');
    if (event.target === modal) {
      closeQRISPaymentModal();
    }
  });

  // Inisialisasi awal
  renderCatalog(products);
  updateCartUI();
</script>
</body>
</html>
